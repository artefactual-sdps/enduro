-- create "deletion_request" table
CREATE TABLE `deletion_request` (`id` bigint NOT NULL AUTO_INCREMENT, `uuid` char(36) NOT NULL, `requester` varchar(1024) NOT NULL, `requester_iss` varchar(1024) NOT NULL, `requester_sub` varchar(1024) NOT NULL, `reviewer` varchar(1024) NOT NULL, `reviewer_iss` varchar(1024) NOT NULL, `reviewer_sub` varchar(1024) NOT NULL, `reason` varchar(2048) NOT NULL, `status` enum('pending','approved','rejected') NOT NULL, `requested_at` timestamp NOT NULL, `reviewed_at` timestamp NULL, `aip_id` bigint NOT NULL, `workflow_id` bigint NULL, PRIMARY KEY (`id`), INDEX `deletion_request_aip_deletion_requests` (`aip_id`), INDEX `deletionrequest_uuid` (`uuid`), UNIQUE INDEX `uuid` (`uuid`), UNIQUE INDEX `workflow_id` (`workflow_id`), CONSTRAINT `deletion_request_aip_deletion_requests` FOREIGN KEY (`aip_id`) REFERENCES `aip` (`id`) ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT `deletion_request_workflow_deletion_request` FOREIGN KEY (`workflow_id`) REFERENCES `workflow` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL) CHARSET utf8mb4 COLLATE utf8mb4_bin;
