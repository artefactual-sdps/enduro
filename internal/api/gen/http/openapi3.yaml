openapi: 3.0.3
info:
    title: Enduro API
    version: "1.0"
servers:
    - url: http://localhost:9000
paths:
    /package:
        get:
            tags:
                - package
            summary: list package
            description: List all stored packages
            operationId: package#list
            parameters:
                - name: name
                  in: query
                  allowEmptyValue: true
                  schema:
                    type: string
                    example: abc123
                  example: abc123
                - name: aip_id
                  in: query
                  description: Identifier of AIP
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                - name: earliest_created_time
                  in: query
                  allowEmptyValue: true
                  schema:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                  example: "1970-01-01T00:00:01Z"
                - name: latest_created_time
                  in: query
                  allowEmptyValue: true
                  schema:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                  example: "1970-01-01T00:00:01Z"
                - name: location_id
                  in: query
                  description: Identifier of storage location
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Identifier of storage location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                - name: status
                  in: query
                  allowEmptyValue: true
                  schema:
                    type: string
                    example: in progress
                    enum:
                        - new
                        - in progress
                        - done
                        - error
                        - unknown
                        - queued
                        - pending
                        - abandoned
                  example: in progress
                - name: cursor
                  in: query
                  description: Pagination cursor
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Pagination cursor
                    example: abc123
                  example: abc123
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListResponseBody'
                            example:
                                items:
                                    - aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                      completed_at: "1970-01-01T00:00:01Z"
                                      created_at: "1970-01-01T00:00:01Z"
                                      id: 1
                                      location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                      name: abc123
                                      run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                      started_at: "1970-01-01T00:00:01Z"
                                      status: in progress
                                      workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                next_cursor: abc123
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
            security:
                - oauth2_header_Authorization: []
    /package/{id}:
        get:
            tags:
                - package
            summary: show package
            description: Show package by ID
            operationId: package#show
            parameters:
                - name: id
                  in: path
                  description: Identifier of package to show
                  required: true
                  schema:
                    type: integer
                    description: Identifier of package to show
                    example: 1
                  example: 1
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/EnduroStoredPackage'
                            example:
                                aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                completed_at: "1970-01-01T00:00:01Z"
                                created_at: "1970-01-01T00:00:01Z"
                                id: 1
                                location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                name: abc123
                                run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                started_at: "1970-01-01T00:00:01Z"
                                status: in progress
                                workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound'
                            example:
                                id: 1
                                message: abc123
                "409":
                    description: 'not_available: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /package/{id}/confirm:
        post:
            tags:
                - package
            summary: confirm package
            description: Signal the package has been reviewed and accepted
            operationId: package#confirm
            parameters:
                - name: id
                  in: path
                  description: Identifier of package to look up
                  required: true
                  schema:
                    type: integer
                    description: Identifier of package to look up
                    example: 1
                  example: 1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/ConfirmRequestBody'
                        example:
                            location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "202":
                    description: Accepted response.
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound'
                            example:
                                id: 1
                                message: abc123
                "409":
                    description: 'not_available: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /package/{id}/move:
        get:
            tags:
                - package
            summary: move_status package
            description: Retrieve the status of a permanent storage location move of the package
            operationId: package#move_status
            parameters:
                - name: id
                  in: path
                  description: Identifier of package to move
                  required: true
                  schema:
                    type: integer
                    description: Identifier of package to move
                    example: 1
                  example: 1
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/MoveStatusResult'
                            example:
                                done: false
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound'
                            example:
                                id: 1
                                message: abc123
                "424":
                    description: 'failed_dependency: Failed Dependency response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
        post:
            tags:
                - package
            summary: move package
            description: Move a package to a permanent storage location
            operationId: package#move
            parameters:
                - name: id
                  in: path
                  description: Identifier of package to move
                  required: true
                  schema:
                    type: integer
                    description: Identifier of package to move
                    example: 1
                  example: 1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/ConfirmRequestBody'
                        example:
                            location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "202":
                    description: Accepted response.
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound'
                            example:
                                id: 1
                                message: abc123
                "409":
                    description: 'not_available: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /package/{id}/preservation-actions:
        get:
            tags:
                - package
            summary: preservation_actions package
            description: List all preservation actions by ID
            operationId: package#preservation_actions
            parameters:
                - name: id
                  in: path
                  description: Identifier of package to look up
                  required: true
                  schema:
                    type: integer
                    description: Identifier of package to look up
                    example: 1
                  example: 1
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/EnduroPackagePreservationActions'
                            example:
                                actions:
                                    - completed_at: "1970-01-01T00:00:01Z"
                                      id: 1
                                      package_id: 1
                                      started_at: "1970-01-01T00:00:01Z"
                                      status: in progress
                                      tasks:
                                        - completed_at: "1970-01-01T00:00:01Z"
                                          id: 1
                                          name: abc123
                                          note: abc123
                                          preservation_action_id: 1
                                          started_at: "1970-01-01T00:00:01Z"
                                          status: in progress
                                          task_id: abc123
                                      type: create-and-review-aip
                                      workflow_id: abc123
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound'
                            example:
                                id: 1
                                message: abc123
            security:
                - oauth2_header_Authorization: []
    /package/{id}/reject:
        post:
            tags:
                - package
            summary: reject package
            description: Signal the package has been reviewed and rejected
            operationId: package#reject
            parameters:
                - name: id
                  in: path
                  description: Identifier of package to look up
                  required: true
                  schema:
                    type: integer
                    description: Identifier of package to look up
                    example: 1
                  example: 1
            responses:
                "202":
                    description: Accepted response.
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound'
                            example:
                                id: 1
                                message: abc123
                "409":
                    description: 'not_available: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /package/monitor:
        get:
            tags:
                - package
            summary: monitor package
            operationId: package#monitor
            parameters:
                - name: enduro-ws-ticket
                  in: cookie
                  allowEmptyValue: true
                  schema:
                    type: string
                    example: abc123
                  example: abc123
            responses:
                "101":
                    description: Switching Protocols response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/MonitorResponseBody'
                            example:
                                monitor_ping_event:
                                    message: abc123
                                package_created_event:
                                    id: 1
                                    item:
                                        aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                        completed_at: "1970-01-01T00:00:01Z"
                                        created_at: "1970-01-01T00:00:01Z"
                                        id: 1
                                        location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                        name: abc123
                                        run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                        started_at: "1970-01-01T00:00:01Z"
                                        status: in progress
                                        workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                package_location_updated_event:
                                    id: 1
                                    location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                package_status_updated_event:
                                    id: 1
                                    status: in progress
                                package_updated_event:
                                    id: 1
                                    item:
                                        aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                        completed_at: "1970-01-01T00:00:01Z"
                                        created_at: "1970-01-01T00:00:01Z"
                                        id: 1
                                        location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                        name: abc123
                                        run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                        started_at: "1970-01-01T00:00:01Z"
                                        status: in progress
                                        workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                preservation_action_created_event:
                                    id: 1
                                    item:
                                        completed_at: "1970-01-01T00:00:01Z"
                                        id: 1
                                        package_id: 1
                                        started_at: "1970-01-01T00:00:01Z"
                                        status: in progress
                                        type: create-and-review-aip
                                        workflow_id: abc123
                                preservation_action_updated_event:
                                    id: 1
                                    item:
                                        completed_at: "1970-01-01T00:00:01Z"
                                        id: 1
                                        package_id: 1
                                        started_at: "1970-01-01T00:00:01Z"
                                        status: in progress
                                        type: create-and-review-aip
                                        workflow_id: abc123
                                preservation_task_created_event:
                                    id: 1
                                    item:
                                        completed_at: "1970-01-01T00:00:01Z"
                                        id: 1
                                        name: abc123
                                        note: abc123
                                        preservation_action_id: 1
                                        started_at: "1970-01-01T00:00:01Z"
                                        status: in progress
                                        task_id: abc123
                                preservation_task_updated_event:
                                    id: 1
                                    item:
                                        completed_at: "1970-01-01T00:00:01Z"
                                        id: 1
                                        name: abc123
                                        note: abc123
                                        preservation_action_id: 1
                                        started_at: "1970-01-01T00:00:01Z"
                                        status: in progress
                                        task_id: abc123
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "500":
                    description: 'not_available: Internal Server Error response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
        post:
            tags:
                - package
            summary: monitor_request package
            description: Request access to the /monitor WebSocket.
            operationId: package#monitor_request
            responses:
                "200":
                    description: OK response.
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "500":
                    description: 'not_available: Internal Server Error response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /storage/location:
        get:
            tags:
                - storage
            summary: locations storage
            description: List locations
            operationId: storage#locations
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/LocationResponseCollection'
                            example:
                                - created_at: "1970-01-01T00:00:01Z"
                                  description: abc123
                                  name: abc123
                                  purpose: aip_store
                                  source: minio
                                  uuid: abc123
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
            security:
                - oauth2_header_Authorization: []
        post:
            tags:
                - storage
            summary: add_location storage
            description: Add a storage location
            operationId: storage#add_location
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/AddLocationRequestBody'
                        example:
                            config:
                                Type: sftp
                                Value: '"JSON"'
                            description: abc123
                            name: abc123
                            purpose: aip_store
                            source: minio
            responses:
                "201":
                    description: Created response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AddLocationResult'
                            example:
                                uuid: abc123
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
            security:
                - oauth2_header_Authorization: []
    /storage/location/{uuid}:
        get:
            tags:
                - storage
            summary: show_location storage
            description: Show location by UUID
            operationId: storage#show_location
            parameters:
                - name: uuid
                  in: path
                  description: Identifier of location
                  required: true
                  schema:
                    type: string
                    description: Identifier of location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Location'
                            example:
                                config:
                                    Type: sftp
                                    Value: '"JSON"'
                                created_at: "1970-01-01T00:00:01Z"
                                description: abc123
                                name: abc123
                                purpose: aip_store
                                source: minio
                                uuid: abc123
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Storage location not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/LocationNotFound'
                            example:
                                message: abc123
                                uuid: abc123
            security:
                - oauth2_header_Authorization: []
    /storage/location/{uuid}/packages:
        get:
            tags:
                - storage
            summary: location_packages storage
            description: List all the packages stored in the location with UUID
            operationId: storage#location_packages
            parameters:
                - name: uuid
                  in: path
                  description: Identifier of location
                  required: true
                  schema:
                    type: string
                    description: Identifier of location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageResponseCollection'
                            example:
                                - aip_id: abc123
                                  created_at: "1970-01-01T00:00:01Z"
                                  location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                  name: abc123
                                  object_key: abc123
                                  status: in_review
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Storage location not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/LocationNotFound'
                            example:
                                message: abc123
                                uuid: abc123
            security:
                - oauth2_header_Authorization: []
    /storage/package/{aip_id}:
        get:
            tags:
                - storage
            summary: show storage
            description: Show package by AIPID
            operationId: storage#show
            parameters:
                - name: aip_id
                  in: path
                  description: Identifier of AIP
                  required: true
                  schema:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Package'
                            example:
                                aip_id: abc123
                                created_at: "1970-01-01T00:00:01Z"
                                location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                                name: abc123
                                object_key: abc123
                                status: in_review
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Storage package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound2'
                            example:
                                aip_id: abc123
                                message: abc123
            security:
                - oauth2_header_Authorization: []
    /storage/package/{aip_id}/download:
        get:
            tags:
                - storage
            summary: download storage
            description: Download package by AIPID
            operationId: storage#download
            parameters:
                - name: aip_id
                  in: path
                  description: Identifier of AIP
                  required: true
                  schema:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: string
                                example:
                                    - 97
                                    - 98
                                    - 99
                                    - 49
                                    - 50
                                    - 51
                                format: binary
                            example:
                                - 97
                                - 98
                                - 99
                                - 49
                                - 50
                                - 51
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Storage package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound2'
                            example:
                                aip_id: abc123
                                message: abc123
            security:
                - oauth2_header_Authorization: []
    /storage/package/{aip_id}/reject:
        post:
            tags:
                - storage
            summary: reject storage
            description: Reject a package
            operationId: storage#reject
            parameters:
                - name: aip_id
                  in: path
                  description: Identifier of AIP
                  required: true
                  schema:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "202":
                    description: Accepted response.
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Storage package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound2'
                            example:
                                aip_id: abc123
                                message: abc123
                "409":
                    description: 'not_available: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /storage/package/{aip_id}/store:
        get:
            tags:
                - storage
            summary: move_status storage
            description: Retrieve the status of a permanent storage location move of the package
            operationId: storage#move_status
            parameters:
                - name: aip_id
                  in: path
                  description: Identifier of AIP
                  required: true
                  schema:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/MoveStatusResult'
                            example:
                                done: false
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Storage package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound2'
                            example:
                                aip_id: abc123
                                message: abc123
                "424":
                    description: 'failed_dependency: Failed Dependency response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
        post:
            tags:
                - storage
            summary: move storage
            description: Move a package to a permanent storage location
            operationId: storage#move
            parameters:
                - name: aip_id
                  in: path
                  description: Identifier of AIP
                  required: true
                  schema:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/ConfirmRequestBody'
                        example:
                            location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "202":
                    description: Accepted response.
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "404":
                    description: 'not_found: Storage package not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PackageNotFound2'
                            example:
                                aip_id: abc123
                                message: abc123
                "409":
                    description: 'not_available: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /storage/package/{aip_id}/submit:
        post:
            tags:
                - storage
            summary: submit storage
            description: Start the submission of a package
            operationId: storage#submit
            parameters:
                - name: aip_id
                  in: path
                  description: Identifier of AIP
                  required: true
                  schema:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/SubmitRequestBody'
                        example:
                            name: abc123
            responses:
                "202":
                    description: Accepted response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SubmitResult'
                            example:
                                url: abc123
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "409":
                    description: 'not_available: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /storage/package/{aip_id}/update:
        post:
            tags:
                - storage
            summary: update storage
            description: Signal the storage service that an upload is complete
            operationId: storage#update
            parameters:
                - name: aip_id
                  in: path
                  description: Identifier of AIP
                  required: true
                  schema:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                  example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            responses:
                "202":
                    description: Accepted response.
                "400":
                    description: 'not_valid: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "409":
                    description: 'not_available: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
    /swagger/swagger.json:
        get:
            tags:
                - swagger
            summary: Download gen/http/openapi.json
            description: JSON document containing the API swagger definition.
            operationId: swagger#/swagger/swagger.json
            responses:
                "200":
                    description: File downloaded
            security:
                - oauth2__: []
    /upload/upload:
        post:
            tags:
                - upload
            summary: upload upload
            operationId: upload#upload
            parameters:
                - name: Content-Type
                  in: header
                  description: Content-Type header, must define value for multipart boundary.
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Content-Type header, must define value for multipart boundary.
                    default: multipart/form-data; boundary=goa
                    example: multipart/form-data; boundary=goa
                    pattern: multipart/[^;]+; boundary=.+
                  example: multipart/form-data; boundary=goa
            responses:
                "204":
                    description: No Content response.
                "400":
                    description: 'invalid_multipart_request: Error returned when the request body is not a valid multipart content.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'unauthorized: Unauthorized response.'
                    content:
                        application/json:
                            schema:
                                type: string
                                example: abc123
                            example: abc123
                "500":
                    description: 'internal_error: Fault while processing upload.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
            security:
                - oauth2_header_Authorization: []
components:
    schemas:
        AddLocationRequestBody:
            type: object
            properties:
                config:
                    type: object
                    properties:
                        Type:
                            type: string
                            description: |-
                                Union type name, one of:
                                - "s3"
                                - "sftp"
                                - "url"
                            example: sftp
                            enum:
                                - s3
                                - sftp
                                - url
                        Value:
                            type: string
                            description: JSON formatted union value
                            example: '"JSON"'
                    example:
                        Type: sftp
                        Value: '"JSON"'
                    required:
                        - Type
                        - Value
                description:
                    type: string
                    example: abc123
                name:
                    type: string
                    example: abc123
                purpose:
                    type: string
                    example: aip_store
                    enum:
                        - unspecified
                        - aip_store
                source:
                    type: string
                    example: minio
                    enum:
                        - unspecified
                        - minio
                        - sftp
            example:
                config:
                    Type: sftp
                    Value: '"JSON"'
                description: abc123
                name: abc123
                purpose: aip_store
                source: minio
            required:
                - name
                - source
                - purpose
        AddLocationResult:
            type: object
            properties:
                uuid:
                    type: string
                    example: abc123
            example:
                uuid: abc123
            required:
                - uuid
        ConfirmRequestBody:
            type: object
            properties:
                location_id:
                    type: string
                    description: Identifier of storage location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            example:
                location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            required:
                - location_id
        EnduroMonitorPingEventResponseBody:
            type: object
            properties:
                message:
                    type: string
                    example: abc123
            description: EnduroMonitor-Ping-EventResponseBody result type (default view)
            example:
                message: abc123
        EnduroPackageCreatedEventResponseBody:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of package
                    example: 1
                item:
                    $ref: '#/components/schemas/EnduroStoredPackageResponseBody'
            description: EnduroPackage-Created-EventResponseBody result type (default view)
            example:
                id: 1
                item:
                    aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    completed_at: "1970-01-01T00:00:01Z"
                    created_at: "1970-01-01T00:00:01Z"
                    id: 1
                    location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    name: abc123
                    run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    started_at: "1970-01-01T00:00:01Z"
                    status: in progress
                    workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            required:
                - id
                - item
        EnduroPackageLocationUpdatedEventResponseBody:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of package
                    example: 1
                location_id:
                    type: string
                    description: Identifier of storage location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            description: EnduroPackage-Location-Updated-EventResponseBody result type (default view)
            example:
                id: 1
                location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            required:
                - id
                - location_id
        EnduroPackagePreservationAction:
            type: object
            properties:
                completed_at:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                id:
                    type: integer
                    example: 1
                package_id:
                    type: integer
                    example: 1
                started_at:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                status:
                    type: string
                    example: in progress
                    enum:
                        - unspecified
                        - in progress
                        - done
                        - error
                        - queued
                        - pending
                tasks:
                    $ref: '#/components/schemas/EnduroPackagePreservationTaskCollection'
                type:
                    type: string
                    example: create-and-review-aip
                    enum:
                        - create-aip
                        - create-and-review-aip
                        - move-package
                workflow_id:
                    type: string
                    example: abc123
            description: PreservationAction describes a preservation action.
            example:
                completed_at: "1970-01-01T00:00:01Z"
                id: 1
                package_id: 1
                started_at: "1970-01-01T00:00:01Z"
                status: in progress
                tasks:
                    - completed_at: "1970-01-01T00:00:01Z"
                      id: 1
                      name: abc123
                      note: abc123
                      preservation_action_id: 1
                      started_at: "1970-01-01T00:00:01Z"
                      status: in progress
                      task_id: abc123
                type: create-and-review-aip
                workflow_id: abc123
            required:
                - id
                - workflow_id
                - type
                - status
                - started_at
        EnduroPackagePreservationActionCollection:
            type: array
            items:
                $ref: '#/components/schemas/EnduroPackagePreservationAction'
            example:
                - completed_at: "1970-01-01T00:00:01Z"
                  id: 1
                  package_id: 1
                  started_at: "1970-01-01T00:00:01Z"
                  status: in progress
                  tasks:
                    - completed_at: "1970-01-01T00:00:01Z"
                      id: 1
                      name: abc123
                      note: abc123
                      preservation_action_id: 1
                      started_at: "1970-01-01T00:00:01Z"
                      status: in progress
                      task_id: abc123
                  type: create-and-review-aip
                  workflow_id: abc123
        EnduroPackagePreservationActionResponseBodySimple:
            type: object
            properties:
                completed_at:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                id:
                    type: integer
                    example: 1
                package_id:
                    type: integer
                    example: 1
                started_at:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                status:
                    type: string
                    example: in progress
                    enum:
                        - unspecified
                        - in progress
                        - done
                        - error
                        - queued
                        - pending
                type:
                    type: string
                    example: create-and-review-aip
                    enum:
                        - create-aip
                        - create-and-review-aip
                        - move-package
                workflow_id:
                    type: string
                    example: abc123
            description: PreservationAction describes a preservation action. (simple view)
            example:
                completed_at: "1970-01-01T00:00:01Z"
                id: 1
                package_id: 1
                started_at: "1970-01-01T00:00:01Z"
                status: in progress
                type: create-and-review-aip
                workflow_id: abc123
            required:
                - id
                - workflow_id
                - type
                - status
                - started_at
        EnduroPackagePreservationActions:
            type: object
            properties:
                actions:
                    $ref: '#/components/schemas/EnduroPackagePreservationActionCollection'
            example:
                actions:
                    - completed_at: "1970-01-01T00:00:01Z"
                      id: 1
                      package_id: 1
                      started_at: "1970-01-01T00:00:01Z"
                      status: in progress
                      tasks:
                        - completed_at: "1970-01-01T00:00:01Z"
                          id: 1
                          name: abc123
                          note: abc123
                          preservation_action_id: 1
                          started_at: "1970-01-01T00:00:01Z"
                          status: in progress
                          task_id: abc123
                      type: create-and-review-aip
                      workflow_id: abc123
        EnduroPackagePreservationTask:
            type: object
            properties:
                completed_at:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                id:
                    type: integer
                    example: 1
                name:
                    type: string
                    example: abc123
                note:
                    type: string
                    example: abc123
                preservation_action_id:
                    type: integer
                    example: 1
                started_at:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                status:
                    type: string
                    example: in progress
                    enum:
                        - unspecified
                        - in progress
                        - done
                        - error
                        - queued
                        - pending
                task_id:
                    type: string
                    example: abc123
            description: PreservationTask describes a preservation action task.
            example:
                completed_at: "1970-01-01T00:00:01Z"
                id: 1
                name: abc123
                note: abc123
                preservation_action_id: 1
                started_at: "1970-01-01T00:00:01Z"
                status: in progress
                task_id: abc123
            required:
                - id
                - task_id
                - name
                - status
                - started_at
        EnduroPackagePreservationTaskCollection:
            type: array
            items:
                $ref: '#/components/schemas/EnduroPackagePreservationTask'
            example:
                - completed_at: "1970-01-01T00:00:01Z"
                  id: 1
                  name: abc123
                  note: abc123
                  preservation_action_id: 1
                  started_at: "1970-01-01T00:00:01Z"
                  status: in progress
                  task_id: abc123
        EnduroPackagePreservationTaskResponseBody:
            type: object
            properties:
                completed_at:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                id:
                    type: integer
                    example: 1
                name:
                    type: string
                    example: abc123
                note:
                    type: string
                    example: abc123
                preservation_action_id:
                    type: integer
                    example: 1
                started_at:
                    type: string
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                status:
                    type: string
                    example: in progress
                    enum:
                        - unspecified
                        - in progress
                        - done
                        - error
                        - queued
                        - pending
                task_id:
                    type: string
                    example: abc123
            description: PreservationTask describes a preservation action task. (default view)
            example:
                completed_at: "1970-01-01T00:00:01Z"
                id: 1
                name: abc123
                note: abc123
                preservation_action_id: 1
                started_at: "1970-01-01T00:00:01Z"
                status: in progress
                task_id: abc123
            required:
                - id
                - task_id
                - name
                - status
                - started_at
        EnduroPackageStatusUpdatedEventResponseBody:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of package
                    example: 1
                status:
                    type: string
                    example: in progress
                    enum:
                        - new
                        - in progress
                        - done
                        - error
                        - unknown
                        - queued
                        - pending
                        - abandoned
            description: EnduroPackage-Status-Updated-EventResponseBody result type (default view)
            example:
                id: 1
                status: in progress
            required:
                - id
                - status
        EnduroPackageUpdatedEventResponseBody:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of package
                    example: 1
                item:
                    $ref: '#/components/schemas/EnduroStoredPackageResponseBody'
            description: EnduroPackage-Updated-EventResponseBody result type (default view)
            example:
                id: 1
                item:
                    aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    completed_at: "1970-01-01T00:00:01Z"
                    created_at: "1970-01-01T00:00:01Z"
                    id: 1
                    location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    name: abc123
                    run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    started_at: "1970-01-01T00:00:01Z"
                    status: in progress
                    workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            required:
                - id
                - item
        EnduroPreservationActionCreatedEventResponseBody:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of preservation action
                    example: 1
                item:
                    $ref: '#/components/schemas/EnduroPackagePreservationActionResponseBodySimple'
            description: EnduroPreservation-Action-Created-EventResponseBody result type (default view)
            example:
                id: 1
                item:
                    completed_at: "1970-01-01T00:00:01Z"
                    id: 1
                    package_id: 1
                    started_at: "1970-01-01T00:00:01Z"
                    status: in progress
                    type: create-and-review-aip
                    workflow_id: abc123
            required:
                - id
                - item
        EnduroPreservationActionUpdatedEventResponseBody:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of preservation action
                    example: 1
                item:
                    $ref: '#/components/schemas/EnduroPackagePreservationActionResponseBodySimple'
            description: EnduroPreservation-Action-Updated-EventResponseBody result type (default view)
            example:
                id: 1
                item:
                    completed_at: "1970-01-01T00:00:01Z"
                    id: 1
                    package_id: 1
                    started_at: "1970-01-01T00:00:01Z"
                    status: in progress
                    type: create-and-review-aip
                    workflow_id: abc123
            required:
                - id
                - item
        EnduroPreservationTaskCreatedEventResponseBody:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of preservation task
                    example: 1
                item:
                    $ref: '#/components/schemas/EnduroPackagePreservationTaskResponseBody'
            description: EnduroPreservation-Task-Created-EventResponseBody result type (default view)
            example:
                id: 1
                item:
                    completed_at: "1970-01-01T00:00:01Z"
                    id: 1
                    name: abc123
                    note: abc123
                    preservation_action_id: 1
                    started_at: "1970-01-01T00:00:01Z"
                    status: in progress
                    task_id: abc123
            required:
                - id
                - item
        EnduroPreservationTaskUpdatedEventResponseBody:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of preservation task
                    example: 1
                item:
                    $ref: '#/components/schemas/EnduroPackagePreservationTaskResponseBody'
            description: EnduroPreservation-Task-Updated-EventResponseBody result type (default view)
            example:
                id: 1
                item:
                    completed_at: "1970-01-01T00:00:01Z"
                    id: 1
                    name: abc123
                    note: abc123
                    preservation_action_id: 1
                    started_at: "1970-01-01T00:00:01Z"
                    status: in progress
                    task_id: abc123
            required:
                - id
                - item
        EnduroStoredPackage:
            type: object
            properties:
                aip_id:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                completed_at:
                    type: string
                    description: Completion datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                created_at:
                    type: string
                    description: Creation datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                id:
                    type: integer
                    description: Identifier of package
                    example: 1
                location_id:
                    type: string
                    description: Identifier of storage location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                name:
                    type: string
                    description: Name of the package
                    example: abc123
                run_id:
                    type: string
                    description: Identifier of latest processing workflow run
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                started_at:
                    type: string
                    description: Start datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                status:
                    type: string
                    description: Status of the package
                    default: new
                    example: in progress
                    enum:
                        - new
                        - in progress
                        - done
                        - error
                        - unknown
                        - queued
                        - pending
                        - abandoned
                workflow_id:
                    type: string
                    description: Identifier of processing workflow
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
            description: StoredPackage describes a package retrieved by the service.
            example:
                aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                completed_at: "1970-01-01T00:00:01Z"
                created_at: "1970-01-01T00:00:01Z"
                id: 1
                location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                name: abc123
                run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                started_at: "1970-01-01T00:00:01Z"
                status: in progress
                workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            required:
                - id
                - status
                - created_at
        EnduroStoredPackageCollection:
            type: array
            items:
                $ref: '#/components/schemas/EnduroStoredPackage'
            example:
                - aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                  completed_at: "1970-01-01T00:00:01Z"
                  created_at: "1970-01-01T00:00:01Z"
                  id: 1
                  location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                  name: abc123
                  run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                  started_at: "1970-01-01T00:00:01Z"
                  status: in progress
                  workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
        EnduroStoredPackageResponseBody:
            type: object
            properties:
                aip_id:
                    type: string
                    description: Identifier of AIP
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                completed_at:
                    type: string
                    description: Completion datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                created_at:
                    type: string
                    description: Creation datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                id:
                    type: integer
                    description: Identifier of package
                    example: 1
                location_id:
                    type: string
                    description: Identifier of storage location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                name:
                    type: string
                    description: Name of the package
                    example: abc123
                run_id:
                    type: string
                    description: Identifier of latest processing workflow run
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
                started_at:
                    type: string
                    description: Start datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                status:
                    type: string
                    description: Status of the package
                    default: new
                    example: in progress
                    enum:
                        - new
                        - in progress
                        - done
                        - error
                        - unknown
                        - queued
                        - pending
                        - abandoned
                workflow_id:
                    type: string
                    description: Identifier of processing workflow
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                    format: uuid
            description: StoredPackage describes a package retrieved by the service. (default view)
            example:
                aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                completed_at: "1970-01-01T00:00:01Z"
                created_at: "1970-01-01T00:00:01Z"
                id: 1
                location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                name: abc123
                run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                started_at: "1970-01-01T00:00:01Z"
                status: in progress
                workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
            required:
                - id
                - status
                - created_at
        Error:
            type: object
            properties:
                fault:
                    type: boolean
                    description: Is the error a server-side fault?
                    example: false
                id:
                    type: string
                    description: ID is a unique identifier for this particular occurrence of the problem.
                    example: 123abc
                message:
                    type: string
                    description: Message is a human-readable explanation specific to this occurrence of the problem.
                    example: parameter 'p' must be an integer
                name:
                    type: string
                    description: Name is the name of this class of errors.
                    example: bad_request
                temporary:
                    type: boolean
                    description: Is the error temporary?
                    example: false
                timeout:
                    type: boolean
                    description: Is the error a timeout?
                    example: false
            example:
                fault: false
                id: 123abc
                message: parameter 'p' must be an integer
                name: bad_request
                temporary: false
                timeout: false
            required:
                - name
                - id
                - message
                - temporary
                - timeout
                - fault
        ListResponseBody:
            type: object
            properties:
                items:
                    $ref: '#/components/schemas/EnduroStoredPackageCollection'
                next_cursor:
                    type: string
                    example: abc123
            example:
                items:
                    - aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                      completed_at: "1970-01-01T00:00:01Z"
                      created_at: "1970-01-01T00:00:01Z"
                      id: 1
                      location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                      name: abc123
                      run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                      started_at: "1970-01-01T00:00:01Z"
                      status: in progress
                      workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                next_cursor: abc123
            required:
                - items
        Location:
            type: object
            properties:
                config:
                    type: object
                    properties:
                        Type:
                            type: string
                            description: |-
                                Union type name, one of:
                                - "s3"
                                - "sftp"
                                - "url"
                            example: sftp
                            enum:
                                - s3
                                - sftp
                                - url
                        Value:
                            type: string
                            description: JSON formatted union value
                            example: '"JSON"'
                    example:
                        Type: sftp
                        Value: '"JSON"'
                    required:
                        - Type
                        - Value
                created_at:
                    type: string
                    description: Creation datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                description:
                    type: string
                    description: Description of the location
                    example: abc123
                name:
                    type: string
                    description: Name of location
                    example: abc123
                purpose:
                    type: string
                    description: Purpose of the location
                    default: unspecified
                    example: aip_store
                    enum:
                        - unspecified
                        - aip_store
                source:
                    type: string
                    description: Data source of the location
                    default: unspecified
                    example: minio
                    enum:
                        - unspecified
                        - minio
                        - sftp
                uuid:
                    type: string
                    example: abc123
            example:
                config:
                    Type: sftp
                    Value: '"JSON"'
                created_at: "1970-01-01T00:00:01Z"
                description: abc123
                name: abc123
                purpose: aip_store
                source: minio
                uuid: abc123
            required:
                - name
                - source
                - purpose
                - uuid
                - created_at
        LocationNotFound:
            type: object
            properties:
                message:
                    type: string
                    description: Message of error
                    example: abc123
                uuid:
                    type: string
                    example: abc123
            description: Storage location not found
            example:
                message: abc123
                uuid: abc123
            required:
                - message
                - uuid
        LocationResponse:
            type: object
            properties:
                created_at:
                    type: string
                    description: Creation datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                description:
                    type: string
                    description: Description of the location
                    example: abc123
                name:
                    type: string
                    description: Name of location
                    example: abc123
                purpose:
                    type: string
                    description: Purpose of the location
                    default: unspecified
                    example: aip_store
                    enum:
                        - unspecified
                        - aip_store
                source:
                    type: string
                    description: Data source of the location
                    default: unspecified
                    example: minio
                    enum:
                        - unspecified
                        - minio
                        - sftp
                uuid:
                    type: string
                    example: abc123
            description: A Location describes a location retrieved by the storage service. (default view)
            example:
                created_at: "1970-01-01T00:00:01Z"
                description: abc123
                name: abc123
                purpose: aip_store
                source: minio
                uuid: abc123
            required:
                - name
                - source
                - purpose
                - uuid
                - created_at
        LocationResponseCollection:
            type: array
            items:
                $ref: '#/components/schemas/LocationResponse'
            description: LocationsResponseBody is the result type for an array of LocationResponse (default view)
            example:
                - created_at: "1970-01-01T00:00:01Z"
                  description: abc123
                  name: abc123
                  purpose: aip_store
                  source: minio
                  uuid: abc123
        MonitorResponseBody:
            type: object
            properties:
                monitor_ping_event:
                    $ref: '#/components/schemas/EnduroMonitorPingEventResponseBody'
                package_created_event:
                    $ref: '#/components/schemas/EnduroPackageCreatedEventResponseBody'
                package_location_updated_event:
                    $ref: '#/components/schemas/EnduroPackageLocationUpdatedEventResponseBody'
                package_status_updated_event:
                    $ref: '#/components/schemas/EnduroPackageStatusUpdatedEventResponseBody'
                package_updated_event:
                    $ref: '#/components/schemas/EnduroPackageUpdatedEventResponseBody'
                preservation_action_created_event:
                    $ref: '#/components/schemas/EnduroPreservationActionCreatedEventResponseBody'
                preservation_action_updated_event:
                    $ref: '#/components/schemas/EnduroPreservationActionUpdatedEventResponseBody'
                preservation_task_created_event:
                    $ref: '#/components/schemas/EnduroPreservationTaskCreatedEventResponseBody'
                preservation_task_updated_event:
                    $ref: '#/components/schemas/EnduroPreservationTaskUpdatedEventResponseBody'
            description: MonitorResponseBody result type (default view)
            example:
                monitor_ping_event:
                    message: abc123
                package_created_event:
                    id: 1
                    item:
                        aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                        completed_at: "1970-01-01T00:00:01Z"
                        created_at: "1970-01-01T00:00:01Z"
                        id: 1
                        location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                        name: abc123
                        run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                        started_at: "1970-01-01T00:00:01Z"
                        status: in progress
                        workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                package_location_updated_event:
                    id: 1
                    location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                package_status_updated_event:
                    id: 1
                    status: in progress
                package_updated_event:
                    id: 1
                    item:
                        aip_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                        completed_at: "1970-01-01T00:00:01Z"
                        created_at: "1970-01-01T00:00:01Z"
                        id: 1
                        location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                        name: abc123
                        run_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                        started_at: "1970-01-01T00:00:01Z"
                        status: in progress
                        workflow_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                preservation_action_created_event:
                    id: 1
                    item:
                        completed_at: "1970-01-01T00:00:01Z"
                        id: 1
                        package_id: 1
                        started_at: "1970-01-01T00:00:01Z"
                        status: in progress
                        type: create-and-review-aip
                        workflow_id: abc123
                preservation_action_updated_event:
                    id: 1
                    item:
                        completed_at: "1970-01-01T00:00:01Z"
                        id: 1
                        package_id: 1
                        started_at: "1970-01-01T00:00:01Z"
                        status: in progress
                        type: create-and-review-aip
                        workflow_id: abc123
                preservation_task_created_event:
                    id: 1
                    item:
                        completed_at: "1970-01-01T00:00:01Z"
                        id: 1
                        name: abc123
                        note: abc123
                        preservation_action_id: 1
                        started_at: "1970-01-01T00:00:01Z"
                        status: in progress
                        task_id: abc123
                preservation_task_updated_event:
                    id: 1
                    item:
                        completed_at: "1970-01-01T00:00:01Z"
                        id: 1
                        name: abc123
                        note: abc123
                        preservation_action_id: 1
                        started_at: "1970-01-01T00:00:01Z"
                        status: in progress
                        task_id: abc123
        MoveStatusResult:
            type: object
            properties:
                done:
                    type: boolean
                    example: false
            example:
                done: false
            required:
                - done
        Package:
            type: object
            properties:
                aip_id:
                    type: string
                    example: abc123
                created_at:
                    type: string
                    description: Creation datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                location_id:
                    type: string
                    description: Identifier of storage location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                name:
                    type: string
                    example: abc123
                object_key:
                    type: string
                    example: abc123
                status:
                    type: string
                    description: Status of the package
                    default: unspecified
                    example: in_review
                    enum:
                        - unspecified
                        - in_review
                        - rejected
                        - stored
                        - moving
            example:
                aip_id: abc123
                created_at: "1970-01-01T00:00:01Z"
                location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                name: abc123
                object_key: abc123
                status: in_review
            required:
                - name
                - aip_id
                - status
                - object_key
                - created_at
        PackageNotFound:
            type: object
            properties:
                id:
                    type: integer
                    description: Identifier of missing package
                    example: 1
                message:
                    type: string
                    description: Message of error
                    example: abc123
            description: Package not found
            example:
                id: 1
                message: abc123
            required:
                - message
                - id
        PackageNotFound2:
            type: object
            properties:
                aip_id:
                    type: string
                    description: Identifier of missing package
                    example: abc123
                message:
                    type: string
                    description: Message of error
                    example: abc123
            description: Storage package not found
            example:
                aip_id: abc123
                message: abc123
            required:
                - message
                - aip_id
        PackageResponse:
            type: object
            properties:
                aip_id:
                    type: string
                    example: abc123
                created_at:
                    type: string
                    description: Creation datetime
                    example: "1970-01-01T00:00:01Z"
                    format: date-time
                location_id:
                    type: string
                    description: Identifier of storage location
                    example: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                name:
                    type: string
                    example: abc123
                object_key:
                    type: string
                    example: abc123
                status:
                    type: string
                    description: Status of the package
                    default: unspecified
                    example: in_review
                    enum:
                        - unspecified
                        - in_review
                        - rejected
                        - stored
                        - moving
            description: A Package describes a package retrieved by the storage service. (default view)
            example:
                aip_id: abc123
                created_at: "1970-01-01T00:00:01Z"
                location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                name: abc123
                object_key: abc123
                status: in_review
            required:
                - name
                - aip_id
                - status
                - object_key
                - created_at
        PackageResponseCollection:
            type: array
            items:
                $ref: '#/components/schemas/PackageResponse'
            description: location_packages_response_body is the result type for an array of PackageResponse (default view)
            example:
                - aip_id: abc123
                  created_at: "1970-01-01T00:00:01Z"
                  location_id: d1845cb6-a5ea-474a-9ab8-26f9bcd919f5
                  name: abc123
                  object_key: abc123
                  status: in_review
        SubmitRequestBody:
            type: object
            properties:
                name:
                    type: string
                    example: abc123
            example:
                name: abc123
            required:
                - name
        SubmitResult:
            type: object
            properties:
                url:
                    type: string
                    example: abc123
            example:
                url: abc123
            required:
                - url
    securitySchemes:
        oauth2_header_Authorization:
            type: oauth2
            description: Secures endpoints by requiring a valid OAuth2 access token.
            flows:
                clientCredentials:
                    tokenUrl: /oauth2/token
                    refreshUrl: /oauth2/refresh
                    scopes: {}
tags:
    - name: package
      description: The package service manages packages being transferred to a3m.
    - name: storage
      description: The storage service manages the storage of packages.
    - name: swagger
      description: The swagger service serves the API swagger definition.
    - name: upload
      description: The upload service handles file submissions to the SIPs bucket.
security:
    - oauth2__: []
